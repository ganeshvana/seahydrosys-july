<?xml version="1.0" encoding="utf-8"?>
<odoo>
 
    <!-->>>>>>>>>>>>>>>> @@@@@@ Check_quality - User restriction-->
 
    <record id="mrp_production_form" model="ir.ui.view">
        <field name="name">mrp.production.form</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="quality_mrp.mrp_production_view_form_inherit_quality"/>
        <field name="arch" type="xml">

            <xpath expr="//button[@name='check_quality']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>

            <xpath expr="//button[@name='check_quality']" position="replace">
                    <button name="check_quality" attrs="{'invisible': [('quality_check_todo', '=', False)]}" type="object" string="Quality Checks" class="oe_highlight" data-hotkey="shift+z" groups="oi_manufact_add_fields.group_quality_check_user_enable"/>

            </xpath>

        </field>
    </record> 


    <!-->>>>>>>>>>>>>> @@@@@@ Approve button - User restriction-->
 
    <record id="stock_picking_stage_button_form" model="ir.ui.view">
        <field name="name">stock.picking.stage.button.form</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="oi_inventory_stage_new.stock_picking_approve_form"/>
        <field name="arch" type="xml">

            <!-- action_to_approve -->
            <xpath expr="//button[@name='action_to_approve']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>

            <xpath expr="//button[@name='check_quality']" position="replace">

                <button name="action_to_approve" attrs="{'invisible': ['|', '|',('state', 'in', ('draft','waiting','confirmed')), ('show_validate', '=', False),('picking_type_id','not in',(12)),('is_pc','=',False)]}" string="Approve" type="object" groups="oi_manufact_add_fields.group_inventory_stages_user_enable" class="o_btn_validate" />
            </xpath>

            <xpath expr="//button[@name='action_to_approve']" position="replace">

                <button name="action_to_approve" attrs="{'invisible': ['|', '|',('state', 'in', ('draft','waiting','confirmed')), ('show_validate', '=', False),('picking_type_id','not in',(1)),('is_pc','=',False)]}" string="Approve" type="object" groups="oi_manufact_add_fields.group_inventory_stages_user_enable" class="o_btn_validate" />
            </xpath>


            <!-- button_validate_new -->
            <xpath expr="//button[@name='button_validate_new']" position="attributes">
                <attribute name="invisible">True</attribute>
            </xpath>

            <xpath expr="//button[@name='button_validate_new']" position="replace">

                <button name="button_validate_new" attrs="{'invisible': [('state', '!=', 'approved_for_done')]}" string="Validate" type="object" class="oe_highlight" groups="oi_manufact_add_fields.group_inventory_validate_enable" data-hotkey="v"/>
            </xpath>

        </field>
    </record> 


    <!-->>>>>>>>>>>> @@@@@@ Work Order - Add column in Time tracking-->

        <record id="mrp_workorder_wizard_view" model="ir.ui.view">
             <field name="name">mrp.workorder.wizard.view</field>
             <field name="model">mrp.workorder</field>
             <field name="inherit_id" ref="mrp.mrp_production_workorder_form_view_inherit"/>
             <field name="arch" type="xml">

               
                 <xpath expr="//form/sheet/notebook/page[@name='time_tracking']/group//field/tree/field[@name='date_start']" position="after">
                     <field name="employee"/>
                 </xpath>


             </field>
        </record> 


    <record id="mrp_production_scrap_inherit" model="ir.ui.view">
        <field name="name">mrp.production.scrap</field>
        <field name="model">mrp.production</field>
        <field name="inherit_id" ref="mrp.mrp_production_form_view"/>
        <field name="arch" type="xml">
                 <button name="action_cancel" position="replace">
                       <button name="action_cancel" type="object" string="Cancel" data-hotkey="z"
                            attrs="{'invisible': ['|', '|', ('id', '=', False), ('state', 'in', ('done', 'cancel')), ('confirm_cancel', '=', True)]}" confirm="Are you sure? Do you want to cancel the MO"/>
                </button>  
            <xpath expr="//button[@name='button_scrap']" position="replace">
               <button name="button_scrap" type="object" string="Scrap" attrs="{'invisible': [('state', 'in', ('cancel', 'draft'))]}" data-hotkey="z" groups="oi_manufact_add_fields.group_mrp_scrap"/>
            </xpath>
             <xpath expr="//page[@name='miscellaneous']" position="inside">
                    <label for="note" string="Note"/>
                         <field name="note" string="Note" options="{'no_create_edit': True,'no_create':True}"/> 
                                    
             </xpath>
             <!-- <xpath expr="//field[@name='product_id']" position="after">
                     <field name="tag_ids"/>
                 </xpath> -->


          

        </field>
    </record>

    <record id="stock_picking_scrap" model="ir.ui.view">
        <field name="name">stock.picking.scrap</field>
        <field name="model">stock.picking</field>
        <field name="inherit_id" ref="stock.view_picking_form"/>
        <field name="arch" type="xml">
        
             <xpath expr="//form/header/button[@name='button_scrap']" position="replace">
                
                <button name="button_scrap" type="object" string="Scrap" attrs="{'invisible': ['|', '&amp;', ('picking_type_code', '=', 'incoming'), ('state', '!=', 'done'), '&amp;', ('picking_type_code', '=', 'outgoing'), ('state', '=', 'done')]}" data-hotkey="y" groups="oi_manufact_add_fields.group_stock_scrap"/>
                
            </xpath>


        </field>
    </record>


     <!-- *************************NOTE MASTER************************************ -->
      <record id="note_master_tree_view" model="ir.ui.view">
        <field name="name">note.master.tree</field>
        <field name="model">mrp.note</field>
        <field name="arch" type="xml">
            <tree string="name">
                <field name="name"/> 
            </tree>
            </field>
        </record>



        <record id="note_master_form_view" model="ir.ui.view">
        <field name="name">note.master.form</field>
        <field name="model">mrp.note</field>
        <field name="arch" type="xml">
            <form string="name">
               <sheet>
                    <group name="freight_master">
                        <group>
                            <field name="name"/>
                        </group>
                    </group>
                </sheet>
            </form>
        </field>
        </record>

   
        <record id="action_note_master" model="ir.actions.act_window">         
        <field name="name">Note</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">mrp.note</field>
        <field name="view_mode">tree,form</field>
        <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">
            Create the first record</p>
        </field>
        </record>

         <menuitem id="note_menu_config_master" name="Note"
        sequence="300" parent="mrp.menu_mrp_configuration" action="action_note_master"/>


</odoo>

   